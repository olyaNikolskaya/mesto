(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e,n,r){var o=e.likes,i=e._id,a=e.name,s=e.link,u=e.owner,c=n.cardPhotoSelector,l=n.cardTitleSelector,f=n.cardLikeSelector,h=n.cardLikesCounterSelector,d=n.cardRemoveButtonSelector,p=n.cardTemplate,_=n.activeLikeClass,v=r.handleCardClick,y=r.handleRemoveClick,m=r.handleSetLike,b=r.handleRemoveLike;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._likesList=o,this._cardId=i,this._name=a,this._link=s,this._ownerId=u._id,this._cardItem=p.content.cloneNode(!0).querySelector(".cards__item"),this._likesNumber=this._likesList.length,this._cardPhoto=this._cardItem.querySelector(c),this._cardTitle=this._cardItem.querySelector(l),this._cardRemoveButton=this._cardItem.querySelector(d),this._cardLike=this._cardItem.querySelector(f),this._cardLikesConter=this._cardItem.querySelector(h),this._handleCardClick=v,this._handleRemoveClick=y,this._handleSetLike=m,this._handleRemoveLike=b,this._activeLikeClass=_}var n,r;return n=t,(r=[{key:"getCardInfo",value:function(){var e={};return e.likes=this._likesList,e.id=this._cardId,e.name=this._name,e.link=this._link,e.ownerId=this._ownerId,e}},{key:"setLikesNumber",value:function(e){this._likesNumber=e}},{key:"removeCard",value:function(){this._cardItem.remove()}},{key:"renderCard",value:function(e){return this._cardPhoto.src=this._link,this._cardPhoto.alt=this._name,this._cardTitle.textContent=this._name,this._cardLikesConter.textContent=this._likesNumber,this._countLikesByUser(e)>0&&this._toggleLike(),this._ownerId!==e&&this._cardRemoveButton.classList.add("cards__remove-button_hidden"),this._setEventListeners(),this._cardItem}},{key:"_countLikesByUser",value:function(e){return this._likesList.filter((function(t){return t._id===e})).length}},{key:"_setEventListeners",value:function(){var e=this;this._cardRemoveButton.addEventListener("click",(function(){return e._handleRemoveClick()})),this._cardLike.addEventListener("click",(function(){return e._likeCard()})),this._cardPhoto.addEventListener("click",(function(){return e._handleCardClick()}))}},{key:"_likeCard",value:function(){this._cardLike.classList.contains(this._activeLikeClass)?(this._cardLikesConter.textContent=this._likesNumber-1,this._handleRemoveLike()):(this._cardLikesConter.textContent=this._likesNumber+1,this._handleSetLike()),this._toggleLike()}},{key:"_toggleLike",value:function(){this._cardLike.classList.toggle(this._activeLikeClass)}}])&&e(n.prototype,r),t}();function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._config=t,this._form=n}var t,r;return t=e,(r=[{key:"enableValidation",value:function(){this._setEventListeners(this._form)}},{key:"disableSubmitButton",value:function(){var e=this._form.querySelector(this._config.submitButtonSelector);e.classList.add(this._config.inactiveButtonClass),e.disabled=!0}},{key:"_setEventListeners",value:function(){var e=this,t=Array.from(this._form.querySelectorAll(this._config.inputSelector));t.forEach((function(n){n.addEventListener("input",(function(){e._toggleButtonState(t),e._isValid(n)}))}))}},{key:"_toggleButtonState",value:function(e){var t=this._form.querySelector(this._config.submitButtonSelector);this._hasInvalidInputs(e)?this.disableSubmitButton():(t.classList.remove(this._config.inactiveButtonClass),t.disabled=!1)}},{key:"_isValid",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}},{key:"_hasInvalidInputs",value:function(e){return e.some((function(e){return!e.validity.valid}))}},{key:"_showInputError",value:function(e){var t=this._form.querySelector("#".concat(e.id,"-error"));e.classList.add(this._config.popupFieldError),t.classList.add(this._config.errorClass),t.textContent=e.validationMessage}},{key:"_hideInputError",value:function(e){var t=this._form.querySelector("#".concat(e.id,"-error"));e.classList.remove(this._config.popupFieldError),t.classList.remove(this._config.errorClass),t.textContent=""}}])&&n(t.prototype,r),e}();function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t,n){var r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=r,this._container=n}var t,n;return t=e,(n=[{key:"renderItems",value:function(e){var t=this;e.forEach((function(e){return t._renderer(e)}))}},{key:"addItem",value:function(e){this._container.prepend(e)}}])&&o(t.prototype,n),e}();function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=t,this._popupIsOpenedSelector="popup_is-opened",this._popupCloseSelector=".popup__close"}var t,n;return t=e,(n=[{key:"open",value:function(){document.addEventListener("keydown",this._handleEscClose.bind(this)),this._popup.classList.add(this._popupIsOpenedSelector)}},{key:"close",value:function(){document.removeEventListener("keydown",this._handleEscClose.bind(this)),this._popup.classList.remove(this._popupIsOpenedSelector)}},{key:"setEventListeners",value:function(){this._popup.querySelector(this._popupCloseSelector).addEventListener("click",this.close.bind(this)),this._popup.addEventListener("click",this._closePopupByClickOnOverlay.bind(this))}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"_closePopupByClickOnOverlay",value:function(e){e.target==e.currentTarget&&this.close()}}])&&a(t.prototype,n),e}();function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=d(r);if(o){var n=d(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return h(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,e))._submit=t,n._popupForm=n._popup.querySelector(".popup__form"),n}return t=a,(n=[{key:"setSubmitHandler",value:function(e){this._submit=e}},{key:"open",value:function(){l(d(a.prototype),"open",this).call(this),this._popup.addEventListener("submit",this._submit)}},{key:"close",value:function(){l(d(a.prototype),"close",this).call(this),this._popup.removeEventListener("submit",this._submit),this._popupForm.reset()}},{key:"setInputValue",value:function(e){Array.from(this._popup.querySelectorAll(".popup__field")).forEach((function(t){t.value=e[t.name]}))}},{key:"getInputValues",value:function(){var e=Array.from(this._popup.querySelectorAll(".popup__field")),t={};return e.forEach((function(e){t[e.name]=e.value})),t}},{key:"renderLoading",value:function(e){this._popupForm.querySelector(".popup__save-button").textContent=e?"Сохранение...":"Сохранить"}}])&&c(t.prototype,n),a}(s);function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t,n){return(y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=k(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=k(r);if(o){var n=k(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return b(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return t=a,(n=[{key:"open",value:function(e){this._setDataForPhotoPreview(e),y(k(a.prototype),"open",this).call(this)}},{key:"_setDataForPhotoPreview",value:function(e){var t=this._popup.querySelector(".popup__preview-photo"),n=this._popup.querySelector(".popup__preview-subtitle");t.alt=e.name,t.src=e.link,n.textContent=e.name}}])&&v(t.prototype,n),a}(s);function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var L=function(){function e(t){var n=t.nameSelector,r=t.aboutSelector,o=t.avatarSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._userInfo={},this._userNameElement=document.querySelector(n),this._userDescriptionElement=document.querySelector(r),this._userAvatarElement=document.querySelector(o)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return this._userInfo}},{key:"setUserName",value:function(e){var t=e.name;this._userInfo.name=t}},{key:"setUserAbout",value:function(e){var t=e.about;this._userInfo.about=t}},{key:"setUserAvatar",value:function(e){var t=e.avatar;this._userInfo.avatar=t}},{key:"setUserId",value:function(e){this._userInfo.id=e}},{key:"getUserId",value:function(){return this._userInfo.id}},{key:"renderUserInfo",value:function(e){this._setUserInfo(e),this.renderUserNameAndAbout(),this.renderUserAvatar()}},{key:"renderUserNameAndAbout",value:function(){this._userNameElement.textContent=this._userInfo.name,this._userDescriptionElement.textContent=this._userInfo.about}},{key:"renderUserAvatar",value:function(){this._userAvatarElement.src=this._userInfo.avatar}},{key:"_setUserInfo",value:function(e){var t=e.name,n=e.about,r=e.avatar,o=e._id;this._userInfo.name=t,this._userInfo.about=n,this._userInfo.avatar=r,this._userInfo.id=o}}])&&S(t.prototype,n),e}();function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var w=function(){function e(t){var n=t.baseUrl,r=t.headers;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseUrl=n,this.headers=r}var t,n;return t=e,(n=[{key:"getInitialCards",value:function(){var e=this;return fetch(this._baseUrl+"/cards",{method:"GET",headers:this.headers}).then((function(t){return e._getResponseData(t)}))}},{key:"getUserInfo",value:function(){var e=this;return fetch(this._baseUrl+"/users/me",{method:"GET",headers:this.headers}).then((function(t){return e._getResponseData(t)}))}},{key:"editUserInfo",value:function(e){var t=this,n=e.name,r=e.about;return fetch(this._baseUrl+"/users/me",{method:"PATCH",headers:this.headers,body:JSON.stringify({name:n,about:r})}).then((function(e){return t._getResponseData(e)}))}},{key:"setLike",value:function(e){var t=this;return fetch(this._baseUrl+"/cards/likes/".concat(e),{method:"PUT",headers:this.headers}).then((function(e){return t._getResponseData(e)})).then((function(e){return e.likes.length}))}},{key:"addCard",value:function(e){var t=this,n=e.name,r=e.image;return fetch(this._baseUrl+"/cards",{method:"POST",headers:this.headers,body:JSON.stringify({name:n,link:r})}).then((function(e){return t._getResponseData(e)}))}},{key:"deleteCard",value:function(e){var t=this;return fetch(this._baseUrl+"/cards/".concat(e),{method:"DELETE",headers:this.headers}).then((function(e){return t._getResponseData(e)}))}},{key:"removeLike",value:function(e){var t=this;return fetch(this._baseUrl+"/cards/likes/".concat(e),{method:"DELETE",headers:this.headers}).then((function(e){return t._getResponseData(e)})).then((function(e){return e.likes.length}))}},{key:"updateAvatar",value:function(e){var t=this,n=e.avatar;return fetch(this._baseUrl+"/users/me/avatar",{method:"PATCH",headers:this.headers,body:JSON.stringify({avatar:n})}).then((function(e){return t._getResponseData(e)}))}},{key:"_getResponseData",value:function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}}])&&C(t.prototype,n),e}(),I={cardTemplate:document.querySelector("#card-item"),cardList:document.querySelector(".cards"),previewPhotophoto:document.querySelector(".popup__preview-photo"),previewSubtitle:document.querySelector(".popup__preview-subtitle"),cardPhotoSelector:".cards__photo",cardTitleSelector:".cards__title",cardLikeSelector:".cards__like",cardLikesCounterSelector:".cards__likes_count",cardRemoveButtonSelector:".cards__remove-button",activeLikeClass:"cards__like_active"},E={formSelector:".popup__form",inputSelector:".popup__field",submitButtonSelector:".popup__save-button",inactiveButtonClass:"popup__save-button_disabled",inputErrorClass:"popup__field-error-text",errorClass:"popup__field-error-text_visible",popupFieldError:"popup__field_error"},O=document.querySelector(".popup_photo-preview"),P=document.querySelector(".popup_add-card"),R=document.querySelector(".popup_edit-profile"),U=document.querySelector(".popup_update-avatar"),q=document.querySelector(".profile__add-button"),j=document.querySelector(".profile__edit-button"),T=document.querySelector(".popup-confirm"),A=document.querySelector(".profile__edit-avatar-button"),D=new w({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-17",headers:{authorization:"30d70770-772a-4d02-94ec-a55a1bdcb3a5","Content-Type":"application/json"}}),B=new L({nameSelector:".profile__name",aboutSelector:".profile__description",avatarSelector:".profile__avatar"});D.getUserInfo().then((function(e){B.renderUserInfo(e)})),A.addEventListener("click",(function(){J.disableSubmitButton(),H.open()})),j.addEventListener("click",(function(){M.open(),M.setInputValue(B.getUserInfo())})),q.addEventListener("click",(function(){z.disableSubmitButton(),G.open()}));var N=new g(O);N.setEventListeners();var x=new p(T,(function(){}));function V(e){var n=new t(e,I,{handleCardClick:function(){N.open(e)},handleRemoveClick:function(){x.setSubmitHandler((function(t){t.preventDefault(),x.renderLoading(!0),D.deleteCard(e._id).then((function(){n.removeCard(),x.close(),x.renderLoading(!1)})).catch((function(e){console.log(e)}))})),x.open()},handleSetLike:function(){D.setLike(e._id).then((function(e){n.setLikesNumber(e)})).catch((function(e){console.log(e)}))},handleRemoveLike:function(){D.removeLike(e._id).then((function(e){n.setLikesNumber(e)})).catch((function(e){console.log(e)}))}});return n}x.setEventListeners();var F=new i({renderer:function(e){var t=V(e);F.addItem(t.renderCard(B.getUserId()))}},I.cardList);D.getInitialCards().then((function(e){F.renderItems(e)})).catch((function(e){console.log(e)}));var H=new p(U,(function(e){e.preventDefault(),H.renderLoading(!0);var t=H.getInputValues();D.updateAvatar(t).then((function(){B.setUserAvatar(t),B.renderUserAvatar(),H.close()})).catch((function(e){console.log(e)})).finally((function(){H.renderLoading(!1)}))})),J=new r(E,U.querySelector(E.formSelector));J.enableValidation();var G=new p(P,(function(e){e.preventDefault(),G.renderLoading(!0);var t=G.getInputValues();D.addCard(t).then((function(e){var t=V(e);F.addItem(t.renderCard(e.owner._id)),G.close()})).catch((function(e){console.log(e)})).finally((function(){G.renderLoading(!1)}))})),z=new r(E,P.querySelector(E.formSelector));z.enableValidation();var M=new p(R,(function(e){e.preventDefault(),M.renderLoading(!0);var t=M.getInputValues();D.editUserInfo(t).then((function(){B.setUserName(t),B.setUserAbout(t),B.renderUserNameAndAbout()})).catch((function(e){console.log(e)})).finally((function(){M.renderLoading(!1),M.close()}))}));new r(E,R.querySelector(E.formSelector)).enableValidation(),G.setEventListeners(),M.setEventListeners(),H.setEventListeners()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvdXRpbHMvY29uZmlnLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sIm5hbWVzIjpbIkNhcmQiLCJsaWtlcyIsIl9pZCIsIm5hbWUiLCJsaW5rIiwib3duZXIiLCJjYXJkUGhvdG9TZWxlY3RvciIsImNhcmRUaXRsZVNlbGVjdG9yIiwiY2FyZExpa2VTZWxlY3RvciIsImNhcmRMaWtlc0NvdW50ZXJTZWxlY3RvciIsImNhcmRSZW1vdmVCdXR0b25TZWxlY3RvciIsImNhcmRUZW1wbGF0ZSIsImFjdGl2ZUxpa2VDbGFzcyIsImhhbmRsZUNhcmRDbGljayIsImhhbmRsZVJlbW92ZUNsaWNrIiwiaGFuZGxlU2V0TGlrZSIsImhhbmRsZVJlbW92ZUxpa2UiLCJ0aGlzIiwiX2xpa2VzTGlzdCIsIl9jYXJkSWQiLCJfbmFtZSIsIl9saW5rIiwiX293bmVySWQiLCJfY2FyZEl0ZW0iLCJjb250ZW50IiwiY2xvbmVOb2RlIiwicXVlcnlTZWxlY3RvciIsIl9saWtlc051bWJlciIsImxlbmd0aCIsIl9jYXJkUGhvdG8iLCJfY2FyZFRpdGxlIiwiX2NhcmRSZW1vdmVCdXR0b24iLCJfY2FyZExpa2UiLCJfY2FyZExpa2VzQ29udGVyIiwiX2hhbmRsZUNhcmRDbGljayIsIl9oYW5kbGVSZW1vdmVDbGljayIsIl9oYW5kbGVTZXRMaWtlIiwiX2hhbmRsZVJlbW92ZUxpa2UiLCJfYWN0aXZlTGlrZUNsYXNzIiwiY2FyZEluZm8iLCJpZCIsIm93bmVySWQiLCJudW1iZXIiLCJyZW1vdmUiLCJ1c2VySWQiLCJzcmMiLCJhbHQiLCJ0ZXh0Q29udGVudCIsIl9jb3VudExpa2VzQnlVc2VyIiwiX3RvZ2dsZUxpa2UiLCJjbGFzc0xpc3QiLCJhZGQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJmaWx0ZXIiLCJpdGVtIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9saWtlQ2FyZCIsImNvbnRhaW5zIiwidG9nZ2xlIiwiRm9ybVZhbGlkYXRvciIsImNvbmZpZyIsImZvcm0iLCJfY29uZmlnIiwiX2Zvcm0iLCJzdWJtaXRCdXR0b24iLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJkaXNhYmxlZCIsImlucHV0c0xpc3QiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsImZvckVhY2giLCJpbnB1dEVsZW1lbnQiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJfaXNWYWxpZCIsIl9oYXNJbnZhbGlkSW5wdXRzIiwiZGlzYWJsZVN1Ym1pdEJ1dHRvbiIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJzb21lIiwiZXJyb3JFbGVtZW50IiwicG9wdXBGaWVsZEVycm9yIiwiZXJyb3JDbGFzcyIsInZhbGlkYXRpb25NZXNzYWdlIiwiU2VjdGlvbiIsImNvbnRhaW5lck9iamVjdCIsInJlbmRlcmVyIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsIml0ZW1zIiwicHJlcGVuZCIsIlBvcHVwIiwicG9wdXAiLCJfcG9wdXAiLCJfcG9wdXBJc09wZW5lZFNlbGVjdG9yIiwiX3BvcHVwQ2xvc2VTZWxlY3RvciIsImRvY3VtZW50IiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJjbG9zZSIsIl9jbG9zZVBvcHVwQnlDbGlja09uT3ZlcmxheSIsImV2dCIsImtleSIsImV2ZW50IiwidGFyZ2V0IiwiY3VycmVudFRhcmdldCIsIlBvcHVwV2l0aEZvcm0iLCJwb3B1cFNlbGVjdG9yIiwic3VibWl0IiwiX3N1Ym1pdCIsIl9wb3B1cEZvcm0iLCJyZXNldCIsImRhdGEiLCJ2YWx1ZSIsImlucHV0c0FycmF5Iiwib2JqSW5wdXRWYWx1ZXMiLCJpc0xvYWRpbmciLCJQb3B1cFdpdGhJbWFnZSIsIl9zZXREYXRhRm9yUGhvdG9QcmV2aWV3IiwicHJldmlld1Bob3RvcGhvdG8iLCJwcmV2aWV3U3VidGl0bGUiLCJVc2VySW5mbyIsIm5hbWVTZWxlY3RvciIsImFib3V0U2VsZWN0b3IiLCJhdmF0YXJTZWxlY3RvciIsIl91c2VySW5mbyIsIl91c2VyTmFtZUVsZW1lbnQiLCJfdXNlckRlc2NyaXB0aW9uRWxlbWVudCIsIl91c2VyQXZhdGFyRWxlbWVudCIsImFib3V0IiwiYXZhdGFyIiwidXNlckRhdGEiLCJfc2V0VXNlckluZm8iLCJyZW5kZXJVc2VyTmFtZUFuZEFib3V0IiwicmVuZGVyVXNlckF2YXRhciIsIkFwaSIsImJhc2VVcmwiLCJoZWFkZXJzIiwiX2Jhc2VVcmwiLCJmZXRjaCIsIm1ldGhvZCIsInRoZW4iLCJyZXMiLCJfZ2V0UmVzcG9uc2VEYXRhIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJjYXJkSWQiLCJpbWFnZSIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJjYXJkQ29uZmlnIiwiY2FyZExpc3QiLCJ2YWxpZGF0aW9uQ29uZmlnIiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRFcnJvckNsYXNzIiwicGhvdG9QcmV2aWV3U2VsZWN0b3IiLCJwb3B1cEFkZENhcmRFbGVtZW50IiwicG9wdXBFZGl0RWxlbWVudCIsInBvcHVwRWRpdEF2YXRhckVsZW1lbnQiLCJhZGRDYXJkQnV0dG9uIiwiZWRpdFByb2ZpbGVCdXR0b24iLCJjb25maXJtQ2FyZFJlbW92aW5nUG9wdXBFbGVtZW50IiwiZWRpdEF2YXRhckJ1dHRvbiIsImFwaSIsImF1dGhvcml6YXRpb24iLCJ1c2VySW5mbyIsImdldFVzZXJJbmZvIiwicmVuZGVyVXNlckluZm8iLCJ2YWxpZGF0b3JFZGl0QXZhdGFyUG9wdXAiLCJlZGl0QXZhdGFyUG9wdXAiLCJvcGVuIiwiZWRpdFVzZXJJbmZvUG9wdXAiLCJzZXRJbnB1dFZhbHVlIiwidmFsaWRhdG9yQWRkQ2FyZFBvcHVwIiwiYWRkQ2FyZFBvcHVwIiwicGhvdG9QcmV2aWV3Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJjb25maXJtQ2FyZFJlbW92aW5nUG9wdXAiLCJnZXRDYXJkSXRlbSIsImNhcmREYXRhIiwiY2FyZCIsInNldFN1Ym1pdEhhbmRsZXIiLCJwcmV2ZW50RGVmYXVsdCIsInJlbmRlckxvYWRpbmciLCJkZWxldGVDYXJkIiwicmVtb3ZlQ2FyZCIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJzZXRMaWtlIiwibGVuIiwic2V0TGlrZXNOdW1iZXIiLCJyZW1vdmVMaWtlIiwiYWRkSXRlbSIsInJlbmRlckNhcmQiLCJnZXRVc2VySWQiLCJnZXRJbml0aWFsQ2FyZHMiLCJjYXJkc0RhdGEiLCJyZW5kZXJJdGVtcyIsImlucHV0VmFsdWVzIiwiZ2V0SW5wdXRWYWx1ZXMiLCJ1cGRhdGVBdmF0YXIiLCJzZXRVc2VyQXZhdGFyIiwiZW5hYmxlVmFsaWRhdGlvbiIsImFkZENhcmQiLCJlZGl0VXNlckluZm8iLCJzZXRVc2VyTmFtZSIsInNldFVzZXJBYm91dCJdLCJtYXBwaW5ncyI6IjZMQUFzQkEsRSxXQUNsQixrQkFLTSxJQUpEQyxFQUlDLEVBSkRBLE1BQU9DLEVBSU4sRUFKTUEsSUFBS0MsRUFJWCxFQUpXQSxLQUFNQyxFQUlqQixFQUppQkEsS0FBTUMsRUFJ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QUFDMkYsR0FDSkMsUUFBUUMsSUFBSUYsTUFOaEIsU0FRUyxXQUNMWixFQUFhUyxlQUFjLFNBR2pDVixFQUF3QixJQUFJM0gsRUFBY3NHLEVBQWtCSSxFQUFvQjNJLGNBQWN1SSxFQUFpQkMsZUFDckhvQixFQUFzQjhCLG1CQUV0QixJQUFNaEMsRUFBb0IsSUFBSXJFLEVBQzFCdUQsR0FDQSxTQUFDMUQsR0FDR0EsRUFBTW1GLGlCQUNOWCxFQUFrQlksZUFBYyxHQUNoQyxJQUFNZ0IsRUFBYzVCLEVBQWtCNkIsaUJBQ3RDckMsRUFBSTBDLGFBQWFOLEdBQ2hCOUQsTUFBSyxXQUNGNEIsRUFBU3lDLFlBQVlQLEdBQ3JCbEMsRUFBUzBDLGFBQWFSLEdBQ3RCbEMsRUFBU3BDLDRCQUpiLE9BTU8sU0FBQ3lELEdBQ0pDLFFBQVFDLElBQUlGLE1BUGhCLFNBU1MsV0FDTGYsRUFBa0JZLGVBQWMsR0FDaENaLEVBQWtCNUUsY0FHSyxJQUFJN0MsRUFBY3NHLEVBQWtCSyxFQUFpQjVJLGNBQWN1SSxFQUFpQkMsZUFDNUZrRCxtQkFJM0I3QixFQUFhRSxvQkFDYkwsRUFBa0JLLG9CQUNsQlAsRUFBZ0JPLHFCIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIgZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHtsaWtlcywgX2lkLCBuYW1lLCBsaW5rLCBvd25lcn0sXG4gICAgICAgIHtjYXJkUGhvdG9TZWxlY3RvciwgY2FyZFRpdGxlU2VsZWN0b3IsIGNhcmRMaWtlU2VsZWN0b3IsIGNhcmRMaWtlc0NvdW50ZXJTZWxlY3RvciwgY2FyZFJlbW92ZUJ1dHRvblNlbGVjdG9yXG4gICAgICAgICAgICAsIGNhcmRUZW1wbGF0ZSwgYWN0aXZlTGlrZUNsYXNzfSwgXG4gICAgICAgIHtoYW5kbGVDYXJkQ2xpY2ssIGhhbmRsZVJlbW92ZUNsaWNrLCBoYW5kbGVTZXRMaWtlLCBoYW5kbGVSZW1vdmVMaWtlfVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXMuX2xpa2VzTGlzdCA9IGxpa2VzO1xuICAgICAgICAgICAgdGhpcy5fY2FyZElkID0gX2lkXG4gICAgICAgICAgICB0aGlzLl9uYW1lID0gbmFtZTtcbiAgICAgICAgICAgIHRoaXMuX2xpbmsgPSBsaW5rO1xuICAgICAgICAgICAgdGhpcy5fb3duZXJJZCA9IG93bmVyLl9pZFxuICAgICAgICAgICAgdGhpcy5fY2FyZEl0ZW0gPSBjYXJkVGVtcGxhdGUuY29udGVudC5jbG9uZU5vZGUodHJ1ZSkucXVlcnlTZWxlY3RvcignLmNhcmRzX19pdGVtJyk7XG4gICAgICAgICAgICB0aGlzLl9saWtlc051bWJlciA9IHRoaXMuX2xpa2VzTGlzdC5sZW5ndGhcblxuICAgICAgICAgICAgdGhpcy5fY2FyZFBob3RvID0gdGhpcy5fY2FyZEl0ZW0ucXVlcnlTZWxlY3RvcihjYXJkUGhvdG9TZWxlY3Rvcik7XG4gICAgICAgICAgICB0aGlzLl9jYXJkVGl0bGUgPSB0aGlzLl9jYXJkSXRlbS5xdWVyeVNlbGVjdG9yKGNhcmRUaXRsZVNlbGVjdG9yKTtcbiAgICAgICAgICAgIHRoaXMuX2NhcmRSZW1vdmVCdXR0b24gPSB0aGlzLl9jYXJkSXRlbS5xdWVyeVNlbGVjdG9yKGNhcmRSZW1vdmVCdXR0b25TZWxlY3Rvcik7XG4gICAgICAgICAgICB0aGlzLl9jYXJkTGlrZSA9IHRoaXMuX2NhcmRJdGVtLnF1ZXJ5U2VsZWN0b3IoY2FyZExpa2VTZWxlY3Rvcik7XG4gICAgICAgICAgICB0aGlzLl9jYXJkTGlrZXNDb250ZXIgPSB0aGlzLl9jYXJkSXRlbS5xdWVyeVNlbGVjdG9yKGNhcmRMaWtlc0NvdW50ZXJTZWxlY3Rvcik7XG5cbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZVJlbW92ZUNsaWNrID0gaGFuZGxlUmVtb3ZlQ2xpY2s7XG4gICAgICAgICAgICB0aGlzLl9oYW5kbGVTZXRMaWtlID0gaGFuZGxlU2V0TGlrZTtcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZVJlbW92ZUxpa2UgPSBoYW5kbGVSZW1vdmVMaWtlO1xuXG4gICAgICAgICAgICB0aGlzLl9hY3RpdmVMaWtlQ2xhc3MgPSBhY3RpdmVMaWtlQ2xhc3NcbiAgICB9XG5cbiAgICBnZXRDYXJkSW5mbygpIHtcbiAgICAgICAgY29uc3QgY2FyZEluZm8gPSB7fVxuICAgICAgICBjYXJkSW5mby5saWtlcyA9IHRoaXMuX2xpa2VzTGlzdDtcbiAgICAgICAgXG4gICAgICAgIGNhcmRJbmZvLmlkID0gdGhpcy5fY2FyZElkO1xuICAgICAgICBjYXJkSW5mby5uYW1lID0gdGhpcy5fbmFtZTtcbiAgICAgICAgY2FyZEluZm8ubGluayA9IHRoaXMuX2xpbms7XG4gICAgICAgIGNhcmRJbmZvLm93bmVySWQgPSB0aGlzLl9vd25lcklkXG4gICAgICAgIHJldHVybiBjYXJkSW5mb1xuICAgIH1cblxuICAgIHNldExpa2VzTnVtYmVyKG51bWJlcikge1xuICAgICAgICB0aGlzLl9saWtlc051bWJlciA9IG51bWJlclxuICAgIH1cblxuICAgIHJlbW92ZUNhcmQoKSB7XG4gICAgICAgIHRoaXMuX2NhcmRJdGVtLnJlbW92ZSgpO1xuICAgIH1cblxuICAgIHJlbmRlckNhcmQodXNlcklkKSB7XG4gICAgICAgIHRoaXMuX2NhcmRQaG90by5zcmMgPSB0aGlzLl9saW5rO1xuICAgICAgICB0aGlzLl9jYXJkUGhvdG8uYWx0ID0gdGhpcy5fbmFtZTtcbiAgICAgICAgdGhpcy5fY2FyZFRpdGxlLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcbiAgICAgICAgdGhpcy5fY2FyZExpa2VzQ29udGVyLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXNOdW1iZXI7XG5cbiAgICAgICAgY29uc3QgbnVtYmVyID0gdGhpcy5fY291bnRMaWtlc0J5VXNlcih1c2VySWQpXG4gICAgICAgIGlmKG51bWJlciA+IDApIHtcbiAgICAgICAgICAgIHRoaXMuX3RvZ2dsZUxpa2UoKVxuICAgICAgICB9XG5cbiAgICAgICAgaWYodGhpcy5fb3duZXJJZCAhPT0gdXNlcklkKSB7XG4gICAgICAgICAgICB0aGlzLl9jYXJkUmVtb3ZlQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2NhcmRzX19yZW1vdmUtYnV0dG9uX2hpZGRlbicpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICAgIHJldHVybiB0aGlzLl9jYXJkSXRlbVxuICAgIH1cblxuICAgIF9jb3VudExpa2VzQnlVc2VyKHVzZXJJZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbGlrZXNMaXN0LmZpbHRlcihpdGVtID0+IGl0ZW0uX2lkID09PSB1c2VySWQpLmxlbmd0aFxuICAgIH1cblxuICAgIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgdGhpcy5fY2FyZFJlbW92ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuX2hhbmRsZVJlbW92ZUNsaWNrKCkpO1xuICAgICAgICB0aGlzLl9jYXJkTGlrZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuX2xpa2VDYXJkKCkpO1xuICAgICAgICB0aGlzLl9jYXJkUGhvdG8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLl9oYW5kbGVDYXJkQ2xpY2soKSk7XG4gICAgfVxuXG4gICAgX2xpa2VDYXJkKCkge1xuICAgICAgICBpZiAodGhpcy5fY2FyZExpa2UuY2xhc3NMaXN0LmNvbnRhaW5zKHRoaXMuX2FjdGl2ZUxpa2VDbGFzcykpe1xuICAgICAgICAgICAgdGhpcy5fY2FyZExpa2VzQ29udGVyLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXNOdW1iZXIgLSAxXG4gICAgICAgICAgICB0aGlzLl9oYW5kbGVSZW1vdmVMaWtlKClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2NhcmRMaWtlc0NvbnRlci50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzTnVtYmVyICsgMVxuICAgICAgICAgICAgdGhpcy5faGFuZGxlU2V0TGlrZSgpXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fdG9nZ2xlTGlrZSgpXG4gICAgfVxuXG4gICAgX3RvZ2dsZUxpa2UoKSB7XG4gICAgICAgIHRoaXMuX2NhcmRMaWtlLmNsYXNzTGlzdC50b2dnbGUodGhpcy5fYWN0aXZlTGlrZUNsYXNzKTtcbiAgICB9XG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gICAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtKSB7XG4gICAgICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZztcbiAgICAgICAgdGhpcy5fZm9ybSA9IGZvcm1cbiAgICB9XG5cbiAgICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycyh0aGlzLl9mb3JtKVxuICAgIH1cblxuICAgIGRpc2FibGVTdWJtaXRCdXR0b24oKSB7XG4gICAgICAgIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl9jb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3IpIFxuICAgICAgICBzdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9jb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICAgIHN1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICBjb25zdCBpbnB1dHNMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fY29uZmlnLmlucHV0U2VsZWN0b3IpKTtcbiAgICAgICAgaW5wdXRzTGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKGlucHV0c0xpc3QpXG4gICAgICAgICAgICAgICAgdGhpcy5faXNWYWxpZChpbnB1dEVsZW1lbnQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIF90b2dnbGVCdXR0b25TdGF0ZShpbnB1dHNMaXN0KSB7XG4gICAgICAgIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl9jb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICAgICAgICBpZih0aGlzLl9oYXNJbnZhbGlkSW5wdXRzKGlucHV0c0xpc3QpKSB7XG4gICAgICAgICAgICB0aGlzLmRpc2FibGVTdWJtaXRCdXR0b24oKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHN1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgICAgICAgIHN1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgX2lzVmFsaWQoaW5wdXRFbGVtZW50KSB7XG4gICAgICAgIGlmKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgICAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgX2hhc0ludmFsaWRJbnB1dHMoaW5wdXRzTGlzdCkge1xuICAgICAgICByZXR1cm4gaW5wdXRzTGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xuICAgICAgICB9KVxuICAgIH1cblxuICAgIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICAgICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYClcbiAgICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLnBvcHVwRmllbGRFcnJvcik7XG4gICAgICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5lcnJvckNsYXNzKVxuICAgICAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgfVxuICAgIFxuICAgIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICAgICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5wb3B1cEZpZWxkRXJyb3IpO1xuICAgICAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcuZXJyb3JDbGFzcyk7XG4gICAgICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgfSAgXG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9ue1xuICAgIGNvbnN0cnVjdG9yKHtyZW5kZXJlcn0sIGNvbnRhaW5lck9iamVjdCkge1xuICAgICAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgICAgICB0aGlzLl9jb250YWluZXIgPSBjb250YWluZXJPYmplY3Q7XG4gICAgfVxuXG4gICAgcmVuZGVySXRlbXMoaXRlbXMpIHtcbiAgICAgICAgaXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4gdGhpcy5fcmVuZGVyZXIoaXRlbSkpXG4gICAgfVxuXG4gICAgYWRkSXRlbShpdGVtKSB7XG4gICAgICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGl0ZW0pO1xuICAgIH1cbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gICAgY29uc3RydWN0b3IocG9wdXApIHtcbiAgICAgICAgdGhpcy5fcG9wdXAgPSBwb3B1cDtcbiAgICAgICAgdGhpcy5fcG9wdXBJc09wZW5lZFNlbGVjdG9yID0gJ3BvcHVwX2lzLW9wZW5lZCdcbiAgICAgICAgdGhpcy5fcG9wdXBDbG9zZVNlbGVjdG9yID0gJy5wb3B1cF9fY2xvc2UnXG4gICAgfVxuXG4gICAgb3BlbigpIHtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKHRoaXMuX3BvcHVwSXNPcGVuZWRTZWxlY3RvcilcbiAgICB9XG5cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3BvcHVwSXNPcGVuZWRTZWxlY3RvcilcbiAgICB9XG5cbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgY29uc3QgY2xvc2VCdXR0b24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKHRoaXMuX3BvcHVwQ2xvc2VTZWxlY3Rvcik7XG4gICAgICAgIGNsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5jbG9zZS5iaW5kKHRoaXMpKVxuICAgICAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2Nsb3NlUG9wdXBCeUNsaWNrT25PdmVybGF5LmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIF9oYW5kbGVFc2NDbG9zZShldnQpIHtcbiAgICAgICAgaWYoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgICAgICAgdGhpcy5jbG9zZSgpXG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgX2Nsb3NlUG9wdXBCeUNsaWNrT25PdmVybGF5KGV2ZW50KSB7XG4gICAgICAgIGlmIChldmVudC50YXJnZXQgIT0gZXZlbnQuY3VycmVudFRhcmdldCkge1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBzdWJtaXQpIHtcbiAgICAgICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgICAgIHRoaXMuX3N1Ym1pdCA9IHN1Ym1pdDtcbiAgICAgICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtJylcbiAgICB9XG5cbiAgICBzZXRTdWJtaXRIYW5kbGVyKHN1Ym1pdCkge1xuICAgICAgICB0aGlzLl9zdWJtaXQgPSBzdWJtaXRcbiAgICB9XG5cbiAgICBvcGVuKCkge1xuICAgICAgICBzdXBlci5vcGVuKCk7XG4gICAgICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIHRoaXMuX3N1Ym1pdClcbiAgICB9XG5cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgc3VwZXIuY2xvc2UoKTtcbiAgICAgICAgdGhpcy5fcG9wdXAucmVtb3ZlRXZlbnRMaXN0ZW5lcignc3VibWl0JywgdGhpcy5fc3VibWl0KVxuICAgICAgICB0aGlzLl9wb3B1cEZvcm0ucmVzZXQoKTtcbiAgICB9XG5cbiAgICBzZXRJbnB1dFZhbHVlKGRhdGEpe1xuICAgICAgICBjb25zdCBpbnB1dHNBcnJheSA9IEFycmF5LmZyb20odGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwX19maWVsZCcpKTtcbiAgICAgICAgaW5wdXRzQXJyYXkuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgaXRlbS52YWx1ZSA9IGRhdGFbaXRlbS5uYW1lXTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIGdldElucHV0VmFsdWVzKCkge1xuICAgICAgICBjb25zdCBpbnB1dHNBcnJheSA9IEFycmF5LmZyb20odGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwX19maWVsZCcpKTtcbiAgICAgICAgY29uc3Qgb2JqSW5wdXRWYWx1ZXMgPSB7fTtcbiAgICAgICAgaW5wdXRzQXJyYXkuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgb2JqSW5wdXRWYWx1ZXNbaXRlbS5uYW1lXSA9IGl0ZW0udmFsdWU7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gb2JqSW5wdXRWYWx1ZXM7XG4gICAgfVxuXG4gICAgcmVuZGVyTG9hZGluZyhpc0xvYWRpbmcpIHtcbiAgICAgICAgY29uc3Qgc2F2ZUJ1dHRvbiA9IHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3NhdmUtYnV0dG9uJylcbiAgICAgICAgaWYoaXNMb2FkaW5nKSB7XG4gICAgICAgICAgICBzYXZlQnV0dG9uLnRleHRDb250ZW50ID0gXCLQodC+0YXRgNCw0L3QtdC90LjQtS4uLlwiXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzYXZlQnV0dG9uLnRleHRDb250ZW50ID0gXCLQodC+0YXRgNCw0L3QuNGC0YxcIlxuICAgICAgICB9XG4gICAgfVxufSIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgICBcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIH1cblxuICAgIG9wZW4oZGF0YSkge1xuICAgICAgICB0aGlzLl9zZXREYXRhRm9yUGhvdG9QcmV2aWV3KGRhdGEpO1xuICAgICAgICBzdXBlci5vcGVuKCk7XG4gICAgfVxuXG4gICAgX3NldERhdGFGb3JQaG90b1ByZXZpZXcoZGF0YSkge1xuICAgICAgICBjb25zdCBwcmV2aWV3UGhvdG9waG90byA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fcHJldmlldy1waG90bycpO1xuICAgICAgICBjb25zdCBwcmV2aWV3U3VidGl0bGUgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3ByZXZpZXctc3VidGl0bGUnKTtcbiAgICAgICAgcHJldmlld1Bob3RvcGhvdG8uYWx0ID0gZGF0YS5uYW1lO1xuICAgICAgICBwcmV2aWV3UGhvdG9waG90by5zcmMgPSBkYXRhLmxpbms7XG4gICAgICAgIHByZXZpZXdTdWJ0aXRsZS50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcbiAgICB9XG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICB7bmFtZVNlbGVjdG9yLCBhYm91dFNlbGVjdG9yLCBhdmF0YXJTZWxlY3Rvcn1cbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLl91c2VySW5mbyA9IHt9O1xuICAgICAgICAgICAgdGhpcy5fdXNlck5hbWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xuICAgICAgICAgICAgdGhpcy5fdXNlckRlc2NyaXB0aW9uRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYWJvdXRTZWxlY3Rvcik7XG4gICAgICAgICAgICB0aGlzLl91c2VyQXZhdGFyRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYXZhdGFyU2VsZWN0b3IpXG4gICAgfSAgXG5cbiAgICBnZXRVc2VySW5mbygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3VzZXJJbmZvO1xuICAgIH1cblxuICAgIHNldFVzZXJOYW1lKHtuYW1lfSkge1xuICAgICAgICB0aGlzLl91c2VySW5mby5uYW1lICA9IG5hbWVcbiAgICB9XG5cbiAgICBzZXRVc2VyQWJvdXQoe2Fib3V0fSkge1xuICAgICAgICB0aGlzLl91c2VySW5mby5hYm91dCA9IGFib3V0XG4gICAgfVxuXG4gICAgc2V0VXNlckF2YXRhcih7YXZhdGFyfSkge1xuICAgICAgICB0aGlzLl91c2VySW5mby5hdmF0YXIgPSBhdmF0YXJcbiAgICB9XG5cbiAgICBzZXRVc2VySWQoaWQpIHtcbiAgICAgICAgdGhpcy5fdXNlckluZm8uaWQgPSBpZFxuICAgIH1cblxuICAgIGdldFVzZXJJZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3VzZXJJbmZvLmlkXG4gICAgfVxuXG4gICAgcmVuZGVyVXNlckluZm8odXNlckRhdGEpIHtcbiAgICAgICAgdGhpcy5fc2V0VXNlckluZm8odXNlckRhdGEpO1xuICAgICAgICB0aGlzLnJlbmRlclVzZXJOYW1lQW5kQWJvdXQoKTtcbiAgICAgICAgdGhpcy5yZW5kZXJVc2VyQXZhdGFyKCk7XG4gICAgfVxuXG4gICAgcmVuZGVyVXNlck5hbWVBbmRBYm91dCgpIHtcbiAgICAgICAgdGhpcy5fdXNlck5hbWVFbGVtZW50LnRleHRDb250ZW50ID0gdGhpcy5fdXNlckluZm8ubmFtZTtcbiAgICAgICAgdGhpcy5fdXNlckRlc2NyaXB0aW9uRWxlbWVudC50ZXh0Q29udGVudCA9IHRoaXMuX3VzZXJJbmZvLmFib3V0O1xuICAgIH1cblxuICAgIHJlbmRlclVzZXJBdmF0YXIoKSB7XG4gICAgICAgIHRoaXMuX3VzZXJBdmF0YXJFbGVtZW50LnNyYyA9IHRoaXMuX3VzZXJJbmZvLmF2YXRhclxuICAgIH1cblxuICAgIF9zZXRVc2VySW5mbyh7bmFtZSwgYWJvdXQsIGF2YXRhciwgX2lkfSkge1xuICAgICAgICB0aGlzLl91c2VySW5mby5uYW1lID0gbmFtZVxuICAgICAgICB0aGlzLl91c2VySW5mby5hYm91dCA9IGFib3V0XG4gICAgICAgIHRoaXMuX3VzZXJJbmZvLmF2YXRhciA9IGF2YXRhclxuICAgICAgICB0aGlzLl91c2VySW5mby5pZCA9IF9pZFxuICAgIH1cbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xuICAgIGNvbnN0cnVjdG9yKHtiYXNlVXJsLCBoZWFkZXJzfSkge1xuICAgICAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcbiAgICAgICAgdGhpcy5oZWFkZXJzID0gaGVhZGVycztcbiAgICB9XG5cbiAgICBnZXRJbml0aWFsQ2FyZHMoKSB7XG4gICAgICAgIHJldHVybiBmZXRjaCh0aGlzLl9iYXNlVXJsICsgJy9jYXJkcycsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycywgXG4gICAgICAgIH0pLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2dldFJlc3BvbnNlRGF0YShyZXMpXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgZ2V0VXNlckluZm8oKSB7XG4gICAgICAgIHJldHVybiBmZXRjaCh0aGlzLl9iYXNlVXJsICsgJy91c2Vycy9tZScsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyBcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2dldFJlc3BvbnNlRGF0YShyZXMpXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgZWRpdFVzZXJJbmZvKHtuYW1lLCBhYm91dH0pIHtcbiAgICAgICAgcmV0dXJuIGZldGNoKHRoaXMuX2Jhc2VVcmwgKyAnL3VzZXJzL21lJywge1xuICAgICAgICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgICAgICAgYWJvdXQ6IGFib3V0XG4gICAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZ2V0UmVzcG9uc2VEYXRhKHJlcylcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBzZXRMaWtlKGNhcmRJZCkge1xuICAgICAgICByZXR1cm4gZmV0Y2godGhpcy5fYmFzZVVybCArIGAvY2FyZHMvbGlrZXMvJHtjYXJkSWR9YCwge1xuICAgICAgICAgICAgbWV0aG9kOiAnUFVUJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2dldFJlc3BvbnNlRGF0YShyZXMpXG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gZGF0YS5saWtlcy5sZW5ndGhcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBhZGRDYXJkKHtuYW1lLCBpbWFnZX0pIHtcbiAgICAgICAgcmV0dXJuIGZldGNoKHRoaXMuX2Jhc2VVcmwgKyAnL2NhcmRzJywge1xuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICAgICAgICBsaW5rOiBpbWFnZSwgXG4gICAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZ2V0UmVzcG9uc2VEYXRhKHJlcylcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBkZWxldGVDYXJkKGNhcmRJZCkge1xuICAgICAgICByZXR1cm4gZmV0Y2godGhpcy5fYmFzZVVybCArIGAvY2FyZHMvJHtjYXJkSWR9YCwge1xuICAgICAgICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVyc1xuICAgICAgICB9KS50aGVuKChyZXMpPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2dldFJlc3BvbnNlRGF0YShyZXMpXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgcmVtb3ZlTGlrZShjYXJkSWQpIHtcbiAgICAgICAgcmV0dXJuIGZldGNoKHRoaXMuX2Jhc2VVcmwgKyBgL2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9nZXRSZXNwb25zZURhdGEocmVzKVxuICAgICAgICB9KVxuICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGRhdGEubGlrZXMubGVuZ3RoXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgdXBkYXRlQXZhdGFyKHthdmF0YXJ9KSB7XG4gICAgICAgIHJldHVybiBmZXRjaCh0aGlzLl9iYXNlVXJsICsgYC91c2Vycy9tZS9hdmF0YXJgLCB7XG4gICAgICAgICAgICBtZXRob2Q6ICdQQVRDSCcsXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgYXZhdGFyOiBhdmF0YXJcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2dldFJlc3BvbnNlRGF0YShyZXMpXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgX2dldFJlc3BvbnNlRGF0YShyZXMpIHtcbiAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcbiAgICB9XG59IiwiZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAgICB7XG4gICAgICAgIG5hbWU6ICfQkNGA0YXRi9C3JyxcbiAgICAgICAgaW1hZ2U6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvYXJraHl6LmpwZydcbiAgICB9LFxuICAgIHtcbiAgICAgICAgbmFtZTogJ9Cn0LXQu9GP0LHQuNC90YHQutCw0Y8g0L7QsdC70LDRgdGC0YwnLFxuICAgICAgICBpbWFnZTogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9jaGVseWFiaW5zay1vYmxhc3QuanBnJ1xuICAgIH0sXG4gICAge1xuICAgICAgICBuYW1lOiAn0JjQstCw0L3QvtCy0L4nLFxuICAgICAgICBpbWFnZTogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9pdmFub3ZvLmpwZydcbiAgICB9LFxuICAgIHtcbiAgICAgICAgbmFtZTogJ9Ca0LDQvNGH0LDRgtC60LAnLFxuICAgICAgICBpbWFnZTogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9rYW1jaGF0a2EuanBnJ1xuICAgIH0sXG4gICAge1xuICAgICAgICBuYW1lOiAn0KXQvtC70LzQvtCz0L7RgNGB0LrQuNC5INGA0LDQudC+0L0nLFxuICAgICAgICBpbWFnZTogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9raG9sbW9nb3Jza3ktcmF5b24uanBnJ1xuICAgIH0sXG4gICAge1xuICAgICAgICBuYW1lOiAn0JHQsNC50LrQsNC7JyxcbiAgICAgICAgaW1hZ2U6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvYmFpa2FsLmpwZydcbiAgICB9XG5dO1xuXG5leHBvcnQgY29uc3QgY2FyZENvbmZpZyA9IHtcbiAgICBjYXJkVGVtcGxhdGU6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjYXJkLWl0ZW0nKSxcbiAgICBjYXJkTGlzdDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRzJyksXG4gICAgcHJldmlld1Bob3RvcGhvdG86IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fcHJldmlldy1waG90bycpLFxuICAgIHByZXZpZXdTdWJ0aXRsZTogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19wcmV2aWV3LXN1YnRpdGxlJyksXG4gICAgY2FyZFBob3RvU2VsZWN0b3I6ICcuY2FyZHNfX3Bob3RvJyxcbiAgICBjYXJkVGl0bGVTZWxlY3RvcjogJy5jYXJkc19fdGl0bGUnLFxuICAgIGNhcmRMaWtlU2VsZWN0b3I6ICcuY2FyZHNfX2xpa2UnLFxuICAgIGNhcmRMaWtlc0NvdW50ZXJTZWxlY3RvcjogJy5jYXJkc19fbGlrZXNfY291bnQnLFxuICAgIGNhcmRSZW1vdmVCdXR0b25TZWxlY3RvcjogJy5jYXJkc19fcmVtb3ZlLWJ1dHRvbicsXG4gICAgYWN0aXZlTGlrZUNsYXNzOiAnY2FyZHNfX2xpa2VfYWN0aXZlJ1xufVxuXG5leHBvcnQgY29uc3QgdmFsaWRhdGlvbkNvbmZpZyA9IHtcbiAgICBmb3JtU2VsZWN0b3I6ICcucG9wdXBfX2Zvcm0nLFxuICAgIGlucHV0U2VsZWN0b3I6ICcucG9wdXBfX2ZpZWxkJyxcbiAgICBzdWJtaXRCdXR0b25TZWxlY3RvcjogJy5wb3B1cF9fc2F2ZS1idXR0b24nLFxuICAgIGluYWN0aXZlQnV0dG9uQ2xhc3M6ICdwb3B1cF9fc2F2ZS1idXR0b25fZGlzYWJsZWQnLFxuICAgIGlucHV0RXJyb3JDbGFzczogJ3BvcHVwX19maWVsZC1lcnJvci10ZXh0JyxcbiAgICBlcnJvckNsYXNzOiAncG9wdXBfX2ZpZWxkLWVycm9yLXRleHRfdmlzaWJsZScsXG4gICAgcG9wdXBGaWVsZEVycm9yOiAncG9wdXBfX2ZpZWxkX2Vycm9yJyxcbn0iLCJpbXBvcnQgJy4vaW5kZXguY3NzJztcblxuaW1wb3J0IENhcmQgZnJvbSAnLi4vY29tcG9uZW50cy9DYXJkLmpzJztcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gJy4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyc7XG5pbXBvcnQgU2VjdGlvbiBmcm9tICcuLi9jb21wb25lbnRzL1NlY3Rpb24uanMnO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzJztcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzJztcbmltcG9ydCBVc2VySW5mbyBmcm9tICcuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzJztcbmltcG9ydCBBcGkgZnJvbSAnLi4vY29tcG9uZW50cy9BcGkuanMnO1xuaW1wb3J0IHtjYXJkQ29uZmlnLCB2YWxpZGF0aW9uQ29uZmlnfSBmcm9tICcuLi91dGlscy9jb25maWcuanMnO1xuXG5jb25zdCBwcm9maWxlTmFtZVNlbGVjdG9yID0gJy5wcm9maWxlX19uYW1lJ1xuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uRWxlbWVudCA9ICcucHJvZmlsZV9fZGVzY3JpcHRpb24nXG5jb25zdCBwcm9maWxlQXZhdGFyID0gJy5wcm9maWxlX19hdmF0YXInXG5jb25zdCBwaG90b1ByZXZpZXdTZWxlY3RvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9waG90by1wcmV2aWV3JylcbmNvbnN0IHBvcHVwQWRkQ2FyZEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfYWRkLWNhcmQnKTtcbmNvbnN0IHBvcHVwRWRpdEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfZWRpdC1wcm9maWxlJyk7XG5jb25zdCBwb3B1cEVkaXRBdmF0YXJFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX3VwZGF0ZS1hdmF0YXInKTtcbmNvbnN0IGFkZENhcmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYWRkLWJ1dHRvbicpO1xuY29uc3QgZWRpdFByb2ZpbGVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fZWRpdC1idXR0b24nKVxuY29uc3QgY29uZmlybUNhcmRSZW1vdmluZ1BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cC1jb25maXJtJyk7XG5jb25zdCBlZGl0QXZhdGFyQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2VkaXQtYXZhdGFyLWJ1dHRvbicpXG5cblxuY29uc3QgIGFwaSA9IG5ldyBBcGkoe1xuICAgIGJhc2VVcmw6ICdodHRwczovL21lc3RvLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTE3JyxcbiAgICBoZWFkZXJzOiB7XG4gICAgICAgIGF1dGhvcml6YXRpb246ICczMGQ3MDc3MC03NzJhLTRkMDItOTRlYy1hNTVhMWJkY2IzYTUnLFxuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nfVxuICAgIH0pO1xuXG4gICAgY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oXG4gICAgICAgIHtcbiAgICAgICAgICAgIG5hbWVTZWxlY3RvcjogcHJvZmlsZU5hbWVTZWxlY3RvcixcbiAgICAgICAgICAgIGFib3V0U2VsZWN0b3I6IHByb2ZpbGVEZXNjcmlwdGlvbkVsZW1lbnQsXG4gICAgICAgICAgICBhdmF0YXJTZWxlY3RvcjogcHJvZmlsZUF2YXRhcixcbiAgICAgICAgfSk7XG5cbiAgICBhcGkuZ2V0VXNlckluZm8oKS50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgIHVzZXJJbmZvLnJlbmRlclVzZXJJbmZvKGRhdGEpXG4gICAgfSk7XG5cbiAgICBlZGl0QXZhdGFyQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIHZhbGlkYXRvckVkaXRBdmF0YXJQb3B1cC5kaXNhYmxlU3VibWl0QnV0dG9uKClcbiAgICAgICAgZWRpdEF2YXRhclBvcHVwLm9wZW4oKVxuICAgIH0pXG4gICAgZWRpdFByb2ZpbGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgZWRpdFVzZXJJbmZvUG9wdXAub3BlbigpXG4gICAgICAgIGVkaXRVc2VySW5mb1BvcHVwLnNldElucHV0VmFsdWUodXNlckluZm8uZ2V0VXNlckluZm8oKSlcbiAgICB9KSAgXG4gICAgYWRkQ2FyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICB2YWxpZGF0b3JBZGRDYXJkUG9wdXAuZGlzYWJsZVN1Ym1pdEJ1dHRvbigpXG4gICAgICAgIGFkZENhcmRQb3B1cC5vcGVuKClcbiAgICB9KVxuXG4gICAgY29uc3QgcGhvdG9QcmV2aWV3ID0gbmV3IFBvcHVwV2l0aEltYWdlKHBob3RvUHJldmlld1NlbGVjdG9yKVxuICAgIHBob3RvUHJldmlldy5zZXRFdmVudExpc3RlbmVycygpO1xuXG4gICAgY29uc3QgY29uZmlybUNhcmRSZW1vdmluZ1BvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gICAgICAgIGNvbmZpcm1DYXJkUmVtb3ZpbmdQb3B1cEVsZW1lbnQsXG4gICAgICAgICgpID0+IHt9XG4gICAgKTtcbiAgICBjb25maXJtQ2FyZFJlbW92aW5nUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIGZ1bmN0aW9uIGdldENhcmRJdGVtKGNhcmREYXRhKSB7XG4gICAgICAgIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChjYXJkRGF0YSwgY2FyZENvbmZpZywgXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaGFuZGxlQ2FyZENsaWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHBob3RvUHJldmlldy5vcGVuKGNhcmREYXRhKVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgaGFuZGxlUmVtb3ZlQ2xpY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uZmlybUNhcmRSZW1vdmluZ1BvcHVwLnNldFN1Ym1pdEhhbmRsZXIoKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlybUNhcmRSZW1vdmluZ1BvcHVwLnJlbmRlckxvYWRpbmcodHJ1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwaS5kZWxldGVDYXJkKGNhcmREYXRhLl9pZClcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXJkLnJlbW92ZUNhcmQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maXJtQ2FyZFJlbW92aW5nUG9wdXAuY2xvc2UoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpcm1DYXJkUmVtb3ZpbmdQb3B1cC5yZW5kZXJMb2FkaW5nKGZhbHNlKTt9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICBjb25maXJtQ2FyZFJlbW92aW5nUG9wdXAub3BlbigpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgaGFuZGxlU2V0TGlrZTogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBhcGkuc2V0TGlrZShjYXJkRGF0YS5faWQpLnRoZW4oKGxlbikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FyZC5zZXRMaWtlc051bWJlcihsZW4pXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBoYW5kbGVSZW1vdmVMaWtlOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGFwaS5yZW1vdmVMaWtlKGNhcmREYXRhLl9pZCkudGhlbigobGVuKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXJkLnNldExpa2VzTnVtYmVyKGxlbilcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCk7XG4gICAgICAgIHJldHVybiBjYXJkXG4gICAgfVxuXG4gICAgY29uc3QgY2FyZExpc3QgPSBuZXcgU2VjdGlvbih7IFxuICAgICAgICByZW5kZXJlcjogKGl0ZW0pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNhcmQgPSBnZXRDYXJkSXRlbShpdGVtKTtcbiAgICAgICAgICAgIGNhcmRMaXN0LmFkZEl0ZW0oY2FyZC5yZW5kZXJDYXJkKHVzZXJJbmZvLmdldFVzZXJJZCgpKSk7XG4gICAgICAgIH1cbiAgICB9LCBjYXJkQ29uZmlnLmNhcmRMaXN0KTtcbiAgICBcbiAgICBcbiAgICBhcGkuZ2V0SW5pdGlhbENhcmRzKCkudGhlbigoY2FyZHNEYXRhKSA9PiB7XG4gICAgICAgIGNhcmRMaXN0LnJlbmRlckl0ZW1zKGNhcmRzRGF0YSk7XG4gICAgfSkuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgfSk7XG4gICAgICAgIFxuICAgIGNvbnN0IGVkaXRBdmF0YXJQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxuICAgICAgICBwb3B1cEVkaXRBdmF0YXJFbGVtZW50LFxuICAgICAgICAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBlZGl0QXZhdGFyUG9wdXAucmVuZGVyTG9hZGluZyh0cnVlKVxuICAgICAgICAgICAgY29uc3QgaW5wdXRWYWx1ZXMgPSBlZGl0QXZhdGFyUG9wdXAuZ2V0SW5wdXRWYWx1ZXMoKTtcblxuICAgICAgICAgICAgYXBpLnVwZGF0ZUF2YXRhcihpbnB1dFZhbHVlcylcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICB1c2VySW5mby5zZXRVc2VyQXZhdGFyKGlucHV0VmFsdWVzKVxuICAgICAgICAgICAgICAgIHVzZXJJbmZvLnJlbmRlclVzZXJBdmF0YXIoKTtcbiAgICAgICAgICAgICAgICBlZGl0QXZhdGFyUG9wdXAuY2xvc2UoKTsgIFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgICAgICAgICBlZGl0QXZhdGFyUG9wdXAucmVuZGVyTG9hZGluZyhmYWxzZSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pO1xuICAgIFxuICAgICAgICBjb25zdCB2YWxpZGF0b3JFZGl0QXZhdGFyUG9wdXAgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uQ29uZmlnLCBwb3B1cEVkaXRBdmF0YXJFbGVtZW50LnF1ZXJ5U2VsZWN0b3IodmFsaWRhdGlvbkNvbmZpZy5mb3JtU2VsZWN0b3IpKVxuICAgICAgICB2YWxpZGF0b3JFZGl0QXZhdGFyUG9wdXAuZW5hYmxlVmFsaWRhdGlvbigpXG4gICAgXG5cbiAgICAgICAgY29uc3QgYWRkQ2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gICAgICAgIHBvcHVwQWRkQ2FyZEVsZW1lbnQsXG4gICAgICAgIChldmVudCkgPT4ge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGFkZENhcmRQb3B1cC5yZW5kZXJMb2FkaW5nKHRydWUpXG4gICAgICAgICAgICBjb25zdCBjYXJkRGF0YSA9IGFkZENhcmRQb3B1cC5nZXRJbnB1dFZhbHVlcygpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBhcGkuYWRkQ2FyZChjYXJkRGF0YSkudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNhcmQgPSBnZXRDYXJkSXRlbShkYXRhKTtcbiAgICAgICAgICAgICAgICBjYXJkTGlzdC5hZGRJdGVtKGNhcmQucmVuZGVyQ2FyZChkYXRhLm93bmVyLl9pZCkpO1xuICAgICAgICAgICAgICAgIGFkZENhcmRQb3B1cC5jbG9zZSgpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgICAgICAgICBhZGRDYXJkUG9wdXAucmVuZGVyTG9hZGluZyhmYWxzZSlcbiAgICAgICAgIH0pXG4gICAgfSk7XG4gICAgY29uc3QgdmFsaWRhdG9yQWRkQ2FyZFBvcHVwID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvbkNvbmZpZywgcG9wdXBBZGRDYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKHZhbGlkYXRpb25Db25maWcuZm9ybVNlbGVjdG9yKSlcbiAgICB2YWxpZGF0b3JBZGRDYXJkUG9wdXAuZW5hYmxlVmFsaWRhdGlvbigpXG5cbiAgICBjb25zdCBlZGl0VXNlckluZm9Qb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxuICAgICAgICBwb3B1cEVkaXRFbGVtZW50LFxuICAgICAgICAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBlZGl0VXNlckluZm9Qb3B1cC5yZW5kZXJMb2FkaW5nKHRydWUpXG4gICAgICAgICAgICBjb25zdCBpbnB1dFZhbHVlcyA9IGVkaXRVc2VySW5mb1BvcHVwLmdldElucHV0VmFsdWVzKCk7XG4gICAgICAgICAgICBhcGkuZWRpdFVzZXJJbmZvKGlucHV0VmFsdWVzKVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIHVzZXJJbmZvLnNldFVzZXJOYW1lKGlucHV0VmFsdWVzKTtcbiAgICAgICAgICAgICAgICB1c2VySW5mby5zZXRVc2VyQWJvdXQoaW5wdXRWYWx1ZXMpO1xuICAgICAgICAgICAgICAgIHVzZXJJbmZvLnJlbmRlclVzZXJOYW1lQW5kQWJvdXQoKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuZmluYWxseSgoKT0+e1xuICAgICAgICAgICAgICAgIGVkaXRVc2VySW5mb1BvcHVwLnJlbmRlckxvYWRpbmcoZmFsc2UpXG4gICAgICAgICAgICAgICAgZWRpdFVzZXJJbmZvUG9wdXAuY2xvc2UoKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pO1xuICAgIGNvbnN0IHZhbGlkYXRvckVkaXRVc2VySW5mb1BvcHVwID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvbkNvbmZpZywgcG9wdXBFZGl0RWxlbWVudC5xdWVyeVNlbGVjdG9yKHZhbGlkYXRpb25Db25maWcuZm9ybVNlbGVjdG9yKSlcbiAgICB2YWxpZGF0b3JFZGl0VXNlckluZm9Qb3B1cC5lbmFibGVWYWxpZGF0aW9uKClcblxuXG5cbiAgICBhZGRDYXJkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICBlZGl0VXNlckluZm9Qb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIGVkaXRBdmF0YXJQb3B1cC5zZXRFdmVudExpc3RlbmVycygpOyJdLCJzb3VyY2VSb290IjoiIn0=